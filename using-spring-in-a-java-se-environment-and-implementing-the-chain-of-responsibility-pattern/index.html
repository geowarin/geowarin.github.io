<!doctype html><html lang=en dir=auto><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Demonstration of how to set up spring in java SE and inject several implementations of the same interface">
<meta name=theme-color content="#ffcd00">
<meta property="og:title" content="Using spring in a Java SE environment and implementing the chain of responsibility pattern • Geowarin">
<meta property="og:description" content="Demonstration of how to set up spring in java SE and inject several implementations of the same interface">
<meta property="og:url" content="https://geowarin.github.io/using-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern/">
<meta property="og:site_name" content="Geowarin">
<meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="design pattern"><meta property="article:tag" content="java SE"><meta property="article:tag" content="spring"><meta property="article:tag" content="spring-java-config"><meta property="article:tag" content="spring-test"><meta property="article:published_time" content="2013-01-20T19:31:56Z"><meta property="article:modified_time" content="2013-01-20T19:31:56Z"><meta name=twitter:card content="summary"><meta name=twitter:site content="@geowarin">
<meta name=generator content="Hugo 0.89.2">
<title>Using spring in a Java SE environment and implementing the chain of responsibility pattern • Geowarin</title>
<link rel=canonical href=https://geowarin.github.io/using-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/assets/css/main.ab98e12b.css><link rel=stylesheet href=/css/custom.css><style>:root{--color-accent:#ffcd00}</style>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-46024908-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class="page type-post has-sidebar">
<div class=site><div id=sidebar class=sidebar>
<a class=screen-reader-text href=#main-menu>Skip to Main Menu</a>
<div class=container><section class="widget widget-about sep-after">
<header>
<div class=logo>
<a href=/>
<img src=/images/logo.png>
</a>
</div>
<h2 class="title site-title">
<a href=/>
Geowarin
</a>
</h2>
<div class=desc>
Web developer
</div>
</header>
</section>
<section class="widget widget-search sep-after">
<header>
<h4 class="title widget-title">Search</h4>
</header>
<form action=/search id=search-form class=search-form>
<label>
<span class=screen-reader-text>Search</span>
<input id=search-term class=search-term type=search name=q placeholder=Search&mldr;>
</label></form>
</section>
<section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu">
<ul><li>
<a href=https://github.com/geowarin target=_blank rel="noopener me">
<span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</li><li>
<a href=https://twitter.com/geowarin target=_blank rel="noopener me">
<span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a>
</li><li>
<a href=https://linkedin.com/in/geowarin target=_blank rel="noopener me">
<span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a>
</li></ul>
</nav>
</section></div>
<div class=sidebar-overlay></div>
</div><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu">
<div class=container>
<a class=screen-reader-text href=#content>Skip to Content</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</span>
<span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</span>
</button>
<ul><li class=item>
<a href=/>Blog</a>
</li><li class=item>
<a href=/archive/>Archive</a>
</li><li class=item>
<a href=/mastering-spring-mvc-4/>Book</a>
</li><li class=item>
<a href=https://github.com/geowarin/geowarin.github.io>Repo</a>
</li></ul>
</div>
</nav><div class=header-widgets>
<div class=container>
<style>.widget-breadcrumbs li:after{content:'\2f '}</style>
<section class="widget widget-breadcrumbs sep-after">
<nav id=breadcrumbs>
<ol><li><a href=/>Geowarin</a></li><li><a href=/post/>Posts</a></li><li><span>Using spring in a Java SE environment and implementing the chain of responsibility pattern</span></li></ol>
</nav>
</section></div>
</div>
<header id=header class="header site-header">
<div class="container sep-after">
<div class=header-info><p class="site-title title">Geowarin</p><p class="desc site-desc">Web developer</p>
</div>
</div>
</header>
<main id=content>
<article lang=en class=entry>
<header class="header entry-header">
<div class="container sep-after">
<div class=header-info>
<h1 class=title>Using spring in a Java SE environment and implementing the chain of responsibility pattern</h1>
<p class=desc>Demonstration of how to set up spring in java SE and inject several implementations of the same interface</p>
</div>
<div class=entry-meta>
<span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span class=screen-reader-text>Posted on </span>
<time class=entry-date datetime=2013-01-20T19:31:56Z>2013, Jan 20</time>
</span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>
5 mins read
</span>
</div>
</div>
</header>
<div class="container entry-content">
<p>In this post I will show you how to use spring 3.0 <a href=http://www.springsource.org/javaconfig>Java based configuration</a> in a Java SE environment, taking advantage of spring autowiring to implement the <a href=http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern>chain of responsibility </a>design pattern with components and services in a simple project. We will also use spring&rsquo;s <a href=http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html>PropertySourcesPlaceholderConfigurer</a> to inject custom properties into our beans with the <a href=http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html>@Value</a> annotation and test our application with spring-test.</p>
<p>Some fun in perspective ! Tag along.</p>
<p>The source code of this application is available on my github : <a href=https://github.com/geowarin/spring-examples/tree/master/spring-standalone-chain>https://github.com/geowarin/spring-examples/tree/master/spring-standalone-chain</a></p>
<h2 id=java-configuration>Java configuration</h2>
<p>Starting from spring 3.0, it is possible to get rid of any XML configuration by providing a pure Java configuration. This is done by annotating your configuration classes with the <strong>@Configuration</strong> annotation and annotating your beans with <strong>@Bean</strong>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Configuration</span>
<span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span>basePackages <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;com.geowarin.spring.service&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;com.geowarin.spring.component&#34;</span><span style=color:#f92672>})</span>
<span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;classpath:chain.properties&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringStandalonChainConfig</span> <span style=color:#f92672>{</span>

	<span style=color:#a6e22e>@Bean</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> PropertySourcesPlaceholderConfigurer <span style=color:#a6e22e>propertySourcesPlaceholderConfigurer</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
		PropertySourcesPlaceholderConfigurer pspc <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PropertySourcesPlaceholderConfigurer<span style=color:#f92672>();</span>
		pspc<span style=color:#f92672>.</span><span style=color:#a6e22e>setPlaceholderPrefix</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;#{&#34;</span><span style=color:#f92672>);</span>
		<span style=color:#66d9ef>return</span> pspc<span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span>

	<span style=color:#a6e22e>@Bean</span>
	<span style=color:#66d9ef>public</span> MainBean <span style=color:#a6e22e>mainBean</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> MainBean<span style=color:#f92672>();</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Additional annotation for java configuration include <strong>@ComponentScan</strong> to specify packages in which your <strong>@Component</strong>, <strong>@Service</strong>, etc. beans are included and <strong>@PropertySource</strong> to include property files in your configuration.</p>
<p>Two thing here :</p>
<ol>
<li>I declare a <strong>MainBean</strong> which will act as an entry point for our application. This bean will benefit of spring autowiring</li>
<li>I declare a custom <strong>PropertySourcesPlaceholderConfigurer</strong> to enable the injection of properties annotated with @Value. I am customizing the prefix for usage of <a href=http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html>spring Expression Language</a> to be able to use #{} expressions instead of default ${}</li>
</ol>
<p>Injection with <strong>@Value</strong> property is a very interesting alternative to the use of spring&rsquo;s Environment as it provides natural type inference.</p>
<p>For some people, the use of java configuration can be confusing because one cannot see at first glance where the config is located. What I usually do is keeping my configuration in a separate source folder. This can be achieved with maven and its build-helper plugin :</p>
<p></p>
<p>This approach is compatible with eclipse if you have m2e installed. In that case when you import a project using this plugin, eclipse will prompt you for the install of the build-helper connector.</p>
<h2 id=our-application-entry-point--the-mainbean>Our application entry point : the MainBean</h2>
<p>Here is the code of our <strong>MainBean</strong> :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MainBean</span> <span style=color:#f92672>{</span>

	<span style=color:#a6e22e>@Autowired</span>
	<span style=color:#a6e22e>@Qualifier</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;doChain&#34;</span><span style=color:#f92672>)</span>
	<span style=color:#66d9ef>private</span> ChainService service<span style=color:#f92672>;</span>

	<span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;#{chain.compatibleWithFirst}&#34;</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>boolean</span> compatibleWithFirst<span style=color:#f92672>;</span>
	<span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;#{chain.compatibleWithSecond}&#34;</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>boolean</span> compatibleWithSecond<span style=color:#f92672>;</span>

	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Logger log <span style=color:#f92672>=</span> LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>MainBean<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>

	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>start</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>

		log<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;property compatibleWithFirst=&#34;</span> <span style=color:#f92672>+</span> compatibleWithFirst<span style=color:#f92672>);</span>
		log<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;property compatibleWithSecond=&#34;</span> <span style=color:#f92672>+</span> compatibleWithSecond<span style=color:#f92672>);</span>

		ChainContext chainContext <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChainContext<span style=color:#f92672>(</span>compatibleWithFirst<span style=color:#f92672>,</span> compatibleWithSecond<span style=color:#f92672>);</span>
		service<span style=color:#f92672>.</span><span style=color:#a6e22e>executeChain</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>);</span>
	<span style=color:#f92672>}</span>

<span style=color:#f92672>}</span>
</code></pre></div><p>We are injecting our service into the bean with a custom qualifier which will enable us to provide several implementations of our service if we need it.</p>
<p>Note that the <strong>@Value</strong> annotation, our properties will automatically be casted to booleans, which is pretty cool. Here is our chain.properties file :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chain.compatibleWithFirst<span style=color:#f92672>=</span>false
chain.compatibleWithSecond<span style=color:#f92672>=</span>true
</code></pre></div><h2 id=the-chain--two-components-and-a-service>The Chain : Two components and a service</h2>
<p>The <strong>ChainContext</strong> class is a simple pojo we pass to our service to be handled by the chain of responsibility and enable us to test if our service successfully handled our case :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChainContext</span> <span style=color:#f92672>{</span>

	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>boolean</span> compatibleWithFirstElement<span style=color:#f92672>;</span>
	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>boolean</span> compatibleWithSecondElement<span style=color:#f92672>;</span>

	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> handledByFirst<span style=color:#f92672>;</span>
	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> handledBySecond<span style=color:#f92672>;</span>

	<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ChainContext</span><span style=color:#f92672>(</span><span style=color:#66d9ef>boolean</span> compatibleWithFirstElement<span style=color:#f92672>,</span> <span style=color:#66d9ef>boolean</span> compatibleWithSecondElement<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>compatibleWithFirstElement</span> <span style=color:#f92672>=</span> compatibleWithFirstElement<span style=color:#f92672>;</span>
		<span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>compatibleWithSecondElement</span> <span style=color:#f92672>=</span> compatibleWithSecondElement<span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span>

	<span style=color:#75715e>// Getters and setters ommited
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</code></pre></div><p><strong>ChainElement</strong> is a simple interface which will be implemented by two components : <strong>FirstChainElement</strong> and <strong>SecondChainElement</strong>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ChainElement</span> <span style=color:#f92672>{</span>

	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>doChain</span><span style=color:#f92672>(</span>ChainContext context<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Here is the first element, the second one is essentially the same thing :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Component</span>
<span style=color:#a6e22e>@Order</span><span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FirstChainElement</span> <span style=color:#66d9ef>implements</span> ChainElement <span style=color:#f92672>{</span>

	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Logger log <span style=color:#f92672>=</span> LoggerFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>FirstChainElement<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>

	<span style=color:#a6e22e>@Override</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>doChain</span><span style=color:#f92672>(</span>ChainContext context<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>

		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>context<span style=color:#f92672>.</span><span style=color:#a6e22e>isCompatibleWithFirstElement</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
			log<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Handled by first&#34;</span><span style=color:#f92672>);</span>
			context<span style=color:#f92672>.</span><span style=color:#a6e22e>setHandledByFirst</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
			<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
		<span style=color:#f92672>}</span>

		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>The thing to note here is the use of the spring annotation <a href=http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/annotation/Order.html>@Order</a> which will enable us to sort our list using spring&rsquo;s <a href=http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/core/annotation/AnnotationAwareOrderComparator.html>AnnotationAwareOrderComparator</a>. Neat :)</p>
<p>And now the service :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Service</span>
<span style=color:#a6e22e>@Qualifier</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;doChain&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DoChainService</span> <span style=color:#66d9ef>implements</span> ChainService <span style=color:#f92672>{</span>

	<span style=color:#a6e22e>@Autowired</span>
	<span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>ChainElement<span style=color:#f92672>&gt;</span> chain<span style=color:#f92672>;</span>

	<span style=color:#a6e22e>@PostConstruct</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
		Collections<span style=color:#f92672>.</span><span style=color:#a6e22e>sort</span><span style=color:#f92672>(</span>chain<span style=color:#f92672>,</span> AnnotationAwareOrderComparator<span style=color:#f92672>.</span><span style=color:#a6e22e>INSTANCE</span><span style=color:#f92672>);</span>
	<span style=color:#f92672>}</span>

	<span style=color:#a6e22e>@Override</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeChain</span><span style=color:#f92672>(</span>ChainContext context<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>

		<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>ChainElement chainElement <span style=color:#f92672>:</span> chain<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>chainElement<span style=color:#f92672>.</span><span style=color:#a6e22e>doChain</span><span style=color:#f92672>(</span>context<span style=color:#f92672>))</span>
				<span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
		<span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Note that we use the same qualifier as our <strong>MainBean</strong> here. The main trick in this article is the usage of <strong>@Autowired</strong> to inject all the components implementing the <strong>ChainElement</strong> interface into a List.</p>
<h2 id=the-application-main-and-tests>The application main and tests</h2>
<p>That&rsquo;s it ! Now you can run your project with this main class :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringStandaloneChainApp</span> <span style=color:#f92672>{</span>

	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String CONFIG_PACKAGE <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;com.geowarin.spring.config&#34;</span><span style=color:#f92672>;</span>

	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>

		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>AnnotationConfigApplicationContext ctx <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>())</span> <span style=color:#f92672>{</span>

			ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>scan</span><span style=color:#f92672>(</span>CONFIG_PACKAGE<span style=color:#f92672>);</span>
			ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>refresh</span><span style=color:#f92672>();</span>

			MainBean bean <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>MainBean<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
			bean<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>And unit test the service with spring-test like that :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@RunWith</span><span style=color:#f92672>(</span>SpringJUnit4ClassRunner<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
<span style=color:#a6e22e>@ContextConfiguration</span><span style=color:#f92672>(</span>classes <span style=color:#f92672>=</span> <span style=color:#f92672>{</span> SpringStandalonChainConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>})</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ChainServiceTest</span> <span style=color:#66d9ef>extends</span> TestCase <span style=color:#f92672>{</span>

	<span style=color:#a6e22e>@Autowired</span>
	<span style=color:#66d9ef>private</span> ChainService chainService<span style=color:#f92672>;</span>

	<span style=color:#a6e22e>@Test</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testHandledByFirst</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>

		ChainContext chainContext <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChainContext<span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
		chainService<span style=color:#f92672>.</span><span style=color:#a6e22e>executeChain</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>);</span>

		Assert<span style=color:#f92672>.</span><span style=color:#a6e22e>assertTrue</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>.</span><span style=color:#a6e22e>isHandledByFirst</span><span style=color:#f92672>());</span>
		Assert<span style=color:#f92672>.</span><span style=color:#a6e22e>assertFalse</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>.</span><span style=color:#a6e22e>isHandledBySecond</span><span style=color:#f92672>());</span>
	<span style=color:#f92672>}</span>

	<span style=color:#a6e22e>@Test</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testHandledBySecond</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>

		ChainContext chainContext <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChainContext<span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
		chainService<span style=color:#f92672>.</span><span style=color:#a6e22e>executeChain</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>);</span>

		Assert<span style=color:#f92672>.</span><span style=color:#a6e22e>assertFalse</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>.</span><span style=color:#a6e22e>isHandledByFirst</span><span style=color:#f92672>());</span>
		Assert<span style=color:#f92672>.</span><span style=color:#a6e22e>assertTrue</span><span style=color:#f92672>(</span>chainContext<span style=color:#f92672>.</span><span style=color:#a6e22e>isHandledBySecond</span><span style=color:#f92672>());</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=conclusion>Conclusion</h2>
<p>Spring is perfectly suitable for a Java SE Environment. Its new java configuration is very handy and powerful as long as you keep things tidy and make sure the configuration is not spread across the whole project.
Finally, let&rsquo;s note it is possible to inject all components or services implementing a given interface into a list with the `@Autowired annotation.</p>
</div>
<footer class=entry-footer>
<div class="container sep-before">
If you liked this article, please share! ❤️
<div class=article-share-links>
<a data-provider=twitter href="https://twitter.com/intent/tweet?url=https%3a%2f%2fgeowarin.github.io%2fusing-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern%2f&via=geowarin&text=Using%20spring%20in%20a%20Java%20SE%20environment%20and%20implementing%20the%20chain%20of%20responsibility%20pattern" class="article-share twitter" target=_blank title="Share on Twitter"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a>
<a data-provider=linkedIn href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fgeowarin.github.io%2fusing-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern%2f&title=Using%20spring%20in%20a%20Java%20SE%20environment%20and%20implementing%20the%20chain%20of%20responsibility%20pattern" class="article-share linkedin" target=_blank title="Share on LinkedIn"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a>
<a data-provider=facebook href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fgeowarin.github.io%2fusing-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern%2f&t=Using%20spring%20in%20a%20Java%20SE%20environment%20and%20implementing%20the%20chain%20of%20responsibility%20pattern" class="article-share facebook" target=_blank title="Share on Facebook"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
</a>
<a data-provider=google href="https://plus.google.com/share?&url=https%3a%2f%2fgeowarin.github.io%2fusing-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern%2f" class="article-share google" target=_blank title="Share on Google+"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M12 24a7 7 0 110-14 7 7 0 010 14zm0-24L0 9.5l4.838 3.94A8 8 0 0112 9a8 8 0 017.162 4.44L24 9.5z"/></svg>
</a>
<a data-provider=buffer href="https://buffer.com/add?url=https%3a%2f%2fgeowarin.github.io%2fusing-spring-in-a-java-se-environment-and-implementing-the-chain-of-responsibility-pattern%2f&text=Using%20spring%20in%20a%20Java%20SE%20environment%20and%20implementing%20the%20chain%20of%20responsibility%20pattern" class="article-share buffer" target=_blank title="Add to Buffer"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>
</a>
</div>
</div>
<div class="container sep-before">
<div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg>
<span class=screen-reader-text>Categories: </span><a class=category href=/categories/spring/>spring</a></div>
<div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=screen-reader-text>Tags: </span><a class=tag href=/tags/design-pattern/>design pattern</a>, <a class=tag href=/tags/java-se/>java SE</a>, <a class=tag href=/tags/spring/>spring</a>, <a class=tag href=/tags/spring-java-config/>spring-java-config</a>, <a class=tag href=/tags/spring-test/>spring-test</a></div>
</div>
</footer>
</article>
<nav class=entry-nav>
<div class=container><div class="prev-entry sep-before">
<a href=/using-hibernate-as-a-jpa-provider-in-a-java-se-environment-and-run-tests-with-dbunit/>
<span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>
Previous</span>
<span class=screen-reader-text>Previous post: </span>Using Hibernate as a JPA provider in a Java SE environment and run tests with dbUnit</a>
</div><div class="next-entry sep-before">
<a href=/using-spring-data-jpa-in-a-java-se-environment-and-run-tests-with-dbunit/>
<span class=screen-reader-text>Next post: </span>Using Spring Data JPA in a Java SE environment and run tests with dbUnit<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg>
</span>
</a>
</div></div>
</nav>
<section id=comments class=comments>
<div class="container sep-before">
<div class=comments-area><div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//geowarin.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
</section>
</main>
<footer id=footer class=footer>
<div class="container sep-before"><div class=copyright>
<p> &copy; 2017-2021 geowarin </p>
</div>
</div>
</footer>
</div>
</div><script>window.__assets_js_src="/assets/js/"</script>
<script src=/assets/js/main.c3bcf2df.js></script>
</body>
</html>