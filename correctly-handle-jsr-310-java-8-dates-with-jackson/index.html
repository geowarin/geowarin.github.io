<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Correctly handle JSR-310 (java 8) dates with Jackson | Geowarin</title>
<meta name=keywords content="spring-boot,jackson,jsr-310"><meta name=description content="The DateTime API in Java 8 is awesome but default Jackson serialization is not. Let&rsquo;s fix that!"><meta name=author content="Geoffroy Warin"><link rel=canonical href=https://geowarin.com/correctly-handle-jsr-310-java-8-dates-with-jackson/><link crossorigin=anonymous href=/assets/css/stylesheet.2850b07a804e8f4a6030d06c768653db6dd84be866101c131b1891c2bcf2a978.css integrity="sha256-KFCweoBOj0pgMNBsdoZT223YS+hmEBwTGxiRwrzyqXg=" rel="preload stylesheet" as=style><link rel=icon href=https://geowarin.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://geowarin.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://geowarin.com/favicon-32x32.png><link rel=apple-touch-icon href=https://geowarin.com/apple-touch-icon.png><link rel=mask-icon href=https://geowarin.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://geowarin.com/correctly-handle-jsr-310-java-8-dates-with-jackson/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://geowarin.com/correctly-handle-jsr-310-java-8-dates-with-jackson/"><meta property="og:site_name" content="Geowarin"><meta property="og:title" content="Correctly handle JSR-310 (java 8) dates with Jackson"><meta property="og:description" content="The DateTime API in Java 8 is awesome but default Jackson serialization is not. Let’s fix that!"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2016-02-02T00:00:00+00:00"><meta property="article:modified_time" content="2016-02-02T00:00:00+00:00"><meta property="article:tag" content="Spring-Boot"><meta property="article:tag" content="Jackson"><meta property="article:tag" content="Jsr-310"><meta name=twitter:card content="summary"><meta name=twitter:title content="Correctly handle JSR-310 (java 8) dates with Jackson"><meta name=twitter:description content="The DateTime API in Java 8 is awesome but default Jackson serialization is not. Let&rsquo;s fix that!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://geowarin.com/post/"},{"@type":"ListItem","position":2,"name":"Correctly handle JSR-310 (java 8) dates with Jackson","item":"https://geowarin.com/correctly-handle-jsr-310-java-8-dates-with-jackson/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Correctly handle JSR-310 (java 8) dates with Jackson","name":"Correctly handle JSR-310 (java 8) dates with Jackson","description":"The DateTime API in Java 8 is awesome but default Jackson serialization is not. Let\u0026rsquo;s fix that!","keywords":["spring-boot","jackson","jsr-310"],"articleBody":"If you are starting a Spring Boot project today, chances are that you want to use Java 8.\nOne of the most awesome features in Java 8 is the Date and Time API, also known as JSR-310.\nBy default, Jackson will treat the new dates as normal objects and serialize all the fields that they contain, which will probably not suit your needs.\nI will show you how to fix the problem with the jackson-datatype-jsr310 library, within a Spring Boot project, but the concepts here are applicable to any application using Jackson.\nThe code is available on github if you want to take a look.\nThe problem Let’s write a simple controller:\n@RestController public class DateController { @RequestMapping(\"/localDate\") public LocalDate todayLocalDate() { return LocalDate.now(); } @RequestMapping(\"/offsetDateTime\") public OffsetDateTime todayOffsetDateTime() { return OffsetDateTime.now(); } } Simple, right? What could possibly go wrong?\nWell, it’s probably not what you expected. This output is not going to be easy to use in your client application.\nMore importantly, are you going to send this kind of format to your server when you are targeting a Java date?\nThe output of offsetDateTime is pretty similar in terms of unusualness.\nThe solution Turns out that the solution is pretty straight-forward. Just add the following dependency to your project:\ncompile 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310' And the result, for LocalDateTime:\n[ 2016, 2, 2 ] And for OffsetDateTime:\n1454451664.708000000 Happy? No? Let’s try improve the solution.\nTweaking the output If you look at how the library works internally, you will see that the output depends on some features being activated or not.\nTo have a better default, we can override the default ObjectMapper and give it a different config:\n@Configuration public class JacksonConfig { @Bean @Primary public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) { ObjectMapper objectMapper = builder.createXmlMapper(false).build(); objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false); // objectMapper.configure(SerializationFeature.WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS, false); return objectMapper; } } This time the result is, for LocalDateTime:\n2016-02-02 And for OffsetDateTime:\n2016-02-02T23:24:08.255+01:00 If you uncomment the second line, dates will be written as timestamps without the nanoseconds but unfortunately, it is mutually exclusive with the first option.\nNevertheless, those formats are a lot more sensible and understandable by client libraries like momentjs.\nConclusion It takes just a little configuration to make JSR-310 dates behave correctly with Jackson and Spring Boot.\nAs always, check out the project on github and tell if this helped!\n","wordCount":"386","inLanguage":"en","datePublished":"2016-02-02T00:00:00Z","dateModified":"2016-02-02T00:00:00Z","author":{"@type":"Person","name":"Geoffroy Warin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://geowarin.com/correctly-handle-jsr-310-java-8-dates-with-jackson/"},"publisher":{"@type":"Organization","name":"Geowarin","logo":{"@type":"ImageObject","url":"https://geowarin.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://geowarin.com/ accesskey=h title="Geowarin (Alt + H)">Geowarin</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://geowarin.com/archive/ title=Archive><span>Archive</span></a></li><li><a href=https://geowarin.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://geowarin.com/mastering-spring-mvc-4/ title=Book><span>Book</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://geowarin.com/>Home</a>&nbsp;»&nbsp;<a href=https://geowarin.com/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Correctly handle JSR-310 (java 8) dates with Jackson</h1><div class=post-meta><span title='2016-02-02 00:00:00 +0000 UTC'>February 2, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Geoffroy Warin</div></header><div class=post-content><p>If you are starting a Spring Boot project today, chances are that you want to use
Java 8.</p><p>One of the most awesome features in Java 8 is the <a href=http://www.mscharhag.com/java/java-8-date-time-api>Date and Time API</a>, also known as JSR-310.</p><p>By default, Jackson will treat the new dates as normal objects and serialize all the
fields that they contain, which will probably not suit your needs.</p><p>I will show you how to fix the problem with the <a href=https://github.com/FasterXML/jackson-datatype-jsr310>jackson-datatype-jsr310</a> library,
within a Spring Boot project, but the concepts here are applicable to any application
using Jackson.</p><p>The code is <a href=https://github.com/geowarin/boot-jsr310>available on github</a> if you want to take a look.</p><h2 id=the-problem>The problem<a hidden class=anchor aria-hidden=true href=#the-problem>#</a></h2><p>Let&rsquo;s write a simple controller:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff9f43>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>public</span> <span style=color:#ff5c57>class</span> <span style=color:#f3f99d>DateController</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff9f43>@RequestMapping</span>(<span style=color:#5af78e>&#34;/localDate&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>public</span> LocalDate <span style=color:#57c7ff>todayLocalDate</span>() {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> LocalDate.<span style=color:#57c7ff>now</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff9f43>@RequestMapping</span>(<span style=color:#5af78e>&#34;/offsetDateTime&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>public</span> OffsetDateTime <span style=color:#57c7ff>todayOffsetDateTime</span>() {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> OffsetDateTime.<span style=color:#57c7ff>now</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Simple, right? What could possibly go wrong?</p><p><img alt="Oh boy what am I going to do with that?" loading=lazy src=/assets/images/articles/2016-02-localDate.png title="Bad date time"></p><p>Well, it&rsquo;s probably not what you expected.
This output is not going to be easy to use in your client application.</p><p>More importantly, are you going to send this kind of format to your server
when you are targeting a Java date?</p><p>The output of <code>offsetDateTime</code> is pretty similar in terms of unusualness.</p><h2 id=the-solution>The solution<a hidden class=anchor aria-hidden=true href=#the-solution>#</a></h2><p>Turns out that the solution is pretty straight-forward.
Just add the following dependency to your project:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>compile <span style=color:#5af78e>&#39;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&#39;</span>
</span></span></code></pre></div><p>And the result, for <code>LocalDateTime</code>:</p><pre tabindex=0><code>[
  2016,
  2,
  2
]
</code></pre><p>And for <code>OffsetDateTime</code>:</p><pre tabindex=0><code>1454451664.708000000
</code></pre><p>Happy? No? Let&rsquo;s try improve the solution.</p><h2 id=tweaking-the-output>Tweaking the output<a hidden class=anchor aria-hidden=true href=#tweaking-the-output>#</a></h2><p>If you look at how the library works internally, you will see that the output
depends on some features being activated or not.</p><p>To have a better default, we can override the default <code>ObjectMapper</code> and give
it a different config:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff9f43>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>public</span> <span style=color:#ff5c57>class</span> <span style=color:#f3f99d>JacksonConfig</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff9f43>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#ff9f43>@Primary</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>public</span> ObjectMapper <span style=color:#57c7ff>objectMapper</span>(Jackson2ObjectMapperBuilder builder) {
</span></span><span style=display:flex><span>        ObjectMapper objectMapper <span style=color:#ff6ac1>=</span> builder.<span style=color:#57c7ff>createXmlMapper</span>(<span style=color:#ff6ac1>false</span>).<span style=color:#57c7ff>build</span>();
</span></span><span style=display:flex><span>        objectMapper.<span style=color:#57c7ff>configure</span>(SerializationFeature.<span style=color:#57c7ff>WRITE_DATES_AS_TIMESTAMPS</span>, <span style=color:#ff6ac1>false</span>);
</span></span><span style=display:flex><span><span style=color:#78787e>//        objectMapper.configure(SerializationFeature.WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS, false);</span>
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> objectMapper;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This time the result is, for <code>LocalDateTime</code>:</p><pre tabindex=0><code>2016-02-02
</code></pre><p>And for <code>OffsetDateTime</code>:</p><pre tabindex=0><code>2016-02-02T23:24:08.255+01:00
</code></pre><p>If you uncomment the second line, dates will be written as timestamps without the nanoseconds
but unfortunately, it is mutually exclusive with the first option.</p><p>Nevertheless, those formats are a lot more sensible and understandable by client
libraries like <a href=http://momentjs.com/>momentjs</a>.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>It takes just a little configuration to make JSR-310 dates behave correctly with Jackson
and Spring Boot.</p><p>As always, check out the project <a href=https://github.com/geowarin/boot-jsr310>on github</a> and tell if
this helped!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://geowarin.com/tags/spring-boot/>Spring-Boot</a></li><li><a href=https://geowarin.com/tags/jackson/>Jackson</a></li><li><a href=https://geowarin.com/tags/jsr-310/>Jsr-310</a></li></ul><nav class=paginav><a class=prev href=https://geowarin.com/social-login-with-spring/><span class=title>« Prev</span><br><span>Social login with Spring</span>
</a><a class=next href=https://geowarin.com/a-simple-chat-with-spring-boot-and-rethinkdb/><span class=title>Next »</span><br><span>A simple chat with Spring Boot and RethinkDB</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Correctly handle JSR-310 (java 8) dates with Jackson on x" href="https://x.com/intent/tweet/?text=Correctly%20handle%20JSR-310%20%28java%208%29%20dates%20with%20Jackson&amp;url=https%3a%2f%2fgeowarin.com%2fcorrectly-handle-jsr-310-java-8-dates-with-jackson%2f&amp;hashtags=spring-boot%2cjackson%2cjsr-310"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Correctly handle JSR-310 (java 8) dates with Jackson on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fgeowarin.com%2fcorrectly-handle-jsr-310-java-8-dates-with-jackson%2f&amp;title=Correctly%20handle%20JSR-310%20%28java%208%29%20dates%20with%20Jackson&amp;summary=Correctly%20handle%20JSR-310%20%28java%208%29%20dates%20with%20Jackson&amp;source=https%3a%2f%2fgeowarin.com%2fcorrectly-handle-jsr-310-java-8-dates-with-jackson%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Correctly handle JSR-310 (java 8) dates with Jackson on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fgeowarin.com%2fcorrectly-handle-jsr-310-java-8-dates-with-jackson%2f&title=Correctly%20handle%20JSR-310%20%28java%208%29%20dates%20with%20Jackson"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li></ul></footer><section class=comments><script>function loadComments(){const t=document.body.classList.contains("dark")?"photon-dark":"github-light";let e=document.createElement("script");e.src="https://utteranc.es/client.js",e.setAttribute("repo","geowarin/geowarin.github.io"),e.setAttribute("issue-term","title"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),document.querySelector("section.comments").innerHTML="",document.querySelector("section.comments").appendChild(e)}const mutationObserver=new MutationObserver(e=>{e.some(e=>e.attributeName==="class")&&loadComments()});mutationObserver.observe(document.body,{attributes:!0}),loadComments()</script></section></article></main><footer class=footer><span>&copy; 2024 <a href=https://geowarin.com/>Geowarin</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><div id=img-overlay style=display:none><button class=close>X</button><div class=overlay-content><img id=img-content><div id=img-caption></div></div></div><script>const figures=document.querySelectorAll("figure > img"),overlay=document.querySelector("#img-overlay");let currentIndex=0;function showOverlay(e){currentIndex=Math.min(Math.max(e,0),figures.length-1);const t=figures[currentIndex];overlay.style.display="flex",document.querySelector("#img-content").src=t.src;const n=t.parentNode.querySelector("figcaption");document.querySelector("#img-caption").innerHTML=n?n.textContent:""}figures.forEach((e,t)=>{e.style.cursor="pointer",e.addEventListener("click",()=>showOverlay(t))});function closeOverlay(){overlay.style.display="none"}document.addEventListener("keydown",e=>{e.key==="Escape"?closeOverlay():e.key==="ArrowRight"?showOverlay(++currentIndex):e.key==="ArrowLeft"&&showOverlay(--currentIndex)}),overlay.addEventListener("click",e=>{e.target===e.currentTarget&&closeOverlay()}),document.querySelector("#img-overlay .close").addEventListener("click",closeOverlay)</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>